(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=(t(20),t(14)),i=t(2),l=(t(21),function(e){var n=["notification"];return e.type&&n.push(e.type),e.message&&r.a.createElement("div",{className:n.join(" ")},e.message)}),f=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},e.fields.map((function(e){return r.a.createElement("div",{key:e.label},e.label,": ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){return r.a.createElement("div",null,e.name," ",e.number,r.a.createElement("button",{onClick:e.onDelete,style:{marginLeft:4}},"delete"))},m=function(e){return r.a.createElement("div",null,e.persons.map((function(n){return r.a.createElement(s,Object.assign({},n,{key:n.id,onDelete:function(){return e.onPersonRemoveClick(n)}}))})))},d=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))},p=t(3),h=t.n(p),v=function(){return h.a.get("/api/persons").then((function(e){return e.data}))},b=function(e){return h.a.post("/api/persons",e).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data}))},y=function(e){return h.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.status}))},g=function(e,n){return e.find((function(e){return e.id===n}))},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),p=s[0],h=s[1],j=Object(a.useState)(""),w=Object(i.a)(j,2),C=w[0],O=w[1],k=Object(a.useState)(""),x=Object(i.a)(k,2),S=x[0],L=x[1],D=Object(a.useState)({text:"",type:""}),P=Object(i.a)(D,2),A=P[0],I=P[1];Object(a.useEffect)((function(){v().then((function(e){o(e)})).catch((function(e){console.error("Fetching all persons failed")}))}),[]);var J=function(){h(""),O("")},N=function(e){var n=e.response.data.errors,t=Object.keys(n).map((function(e){return"".concat(e,": ").concat(n[e])}));I({text:r.a.createElement("div",null,"Error:",t.map((function(e,n){return r.a.createElement("div",{key:n},e)}))),type:"error"}),R()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;setTimeout((function(){I({text:"",type:""})}),e)},T=function(e){I({text:"Information of ".concat(e.name," has already been removed from server"),type:"error"}),o(t.filter((function(n){return n.id!==e.id}))),R()},B=[{label:"name",onChange:function(e){h(e.target.value)},value:p},{label:"number",onChange:function(e){O(e.target.value)},value:C}],F=S?t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):t;return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(l,{message:A.text,type:A.type}),r.a.createElement(d,{value:S,onChange:function(e){L(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(f,{onSubmit:function(e){e.preventDefault();var n={name:p,number:C},a=function(e,n){return e.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))}(t,n);a?window.confirm("".concat(p," is already added to phonebook, replace the old number with a new one?"))&&function(e){var n=e.id;E(n,e).then((function(e){var n=t.map((function(n){return n.id===e.id?e:n}));o(n),J()})).catch((function(){var e=g(t,n);T(e)}))}(Object(u.a)({},a,{number:C})):function(e){b(e).then((function(e){o(t.concat(e)),J(),I({text:"Added ".concat(e.name),type:"success"}),setTimeout((function(){I({text:"",type:""})}),5e3)})).catch(N)}(n)},fields:B}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{persons:F,onPersonRemoveClick:function(e){window.confirm("Delete ".concat(e.name," ?"))&&function(e){var n=g(t,e);y(e).then((function(){o(t.filter((function(n){return n.id!==e}))),I({text:"".concat(n.name," has been removed succesfully"),type:"success"}),R()})).catch((function(){T(n)}))}(e.id)}}))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c6599fa9.chunk.js.map